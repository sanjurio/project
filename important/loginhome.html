<!DOCTYPE html>
<html>

<head>
	 <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>LoginHome</title>
    <div align="left" style="border:1px solid black">
        <img src="http://www.glosys.co.in/wp-content/uploads/2015/06/22685_1543347712592481_5835115883878899060_n.jpg" width="250" height="80" alt="logo"> &nbsp&nbsp &nbsp&nbsp &nbsp&nbsp &nbsp&nbsp &nbsp&nbsp &nbsp&nbsp<font size="+5"><b> Book Information System </b></font>
        <br>
        <br>
        <style>
            body {
                background-color: #A9A9A9;
            }
        </style>
        <style>
            h1 {
                text-align: left;
            }
            
            #nav {
                margin-right: 150px;
            }
        </style>
        <h1>
		Welcome {{ data1[0] }}
		<div class="container">
  <div class="row">
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/loginhome"> <input type="submit" class="btn btn-dark"  value="Home"> </a>
	</div>
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/editprofile"> <input type="submit" class="btn btn-dark"  value="Edit Profile"> </a>
	</div>
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/addcard"> <input type="submit" class="btn btn-dark"  value="Payment Details"> </a>
	</div>
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/address"> <input type="submit" class="btn btn-dark" value="Add Address"> </a>
	</div>
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/mycart"> <input type="submit" class="btn btn-dark"  value="My Cart"> </a>
	</div>
	<div class="col-sm">
		<a id="nav" class="nav-link" href="/myorder"> <input type="submit" class="btn btn-dark" value="My Order"> </a>
	</div>
	<div class="col-sm">
		<a id="nav"class="nav-link" href="/logout"> <input type="submit" class="btn btn-dark" value="Logout"> </a></h1>
    </div>
</head>

<body>
    <form action="/search" method="POST" ><!-- onsubmit="titlequery()" -->
        <input type="text" placeholder="Search title"  name="titles"><!-- id="searchid" -->
        <input type="submit" name="button" class="btn btn-dark" value="search">

    </form>
    <div align="left" style="border:0px solid black">
        <br>
        <div class="row">

            {% for book in data %}

            <div class="card">
                <div class="card-header">
                    <div class="w3-panel w3-border">
                        <p style="background-color:DarkGray;" class="card-text"> {{ book[2] }}
                    </div>
                    <div class="card-body" style="width: 25rem;">
                        Author
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[3] }}</p>
                        Date of Publishing
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[5] }}</p>
                        Description
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[6] }}</p>
                        Copies Available
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[7] }}</p>
                        Price
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[8] }}</p>
                        <p style="background-color:AliceBlue ;" class="card-text">{{ book[9] }}</p>
                        <form action="/add_cart" method="POST">
                            <input type="text" name="bookid1" value={{ book[0] }} style="display:none">
                            <input type="text" name="isbnnum" value={{ book[1] }} style="display:none">
                            <p class="nav-link">
                                <input type="submit" onclick="myFunction()" class="btn btn-primary" value="ADD TO CART" alert="Cart Added">
                            </p>
                            <script type="text/javascript">

                                // function titlequery() {
                                //     const SolrNode = require('./solr-node/index.js');
                                //     var client = new SolrNode({
                                //         host: '127.0.0.1',
                                //         port: '8983',
                                //         core: 'mycore',
                                //         protocol: 'http'
                                //     });

                                //     // Build a search query var

                                //     const searchQuery = client.query()
                                //         .q(document.getElementbyId("searchid").value)
                                //         .addParams({
                                //             wt: 'json',
                                //             indent: true
                                //         }) 

                                //         alert("Working");

                                //     // .start(1)
                                //     // .rows(1)

                                //     client.search(searchQuery, function(err, result) {
                                //         if (err) {
                                //             console.log(err);
                                //             // alert;
                                //             return;
                                //         }

                                //         alert(result.response);
                                //         const response = result.response;
                                //         console.log(response);

                                //         if (response && response.docs) {
                                //             response.docs.forEach((doc) => {
                                //                 console.log(doc);
                                //                 alert(doc);
                                //             })
                                //         }
                                //     });
                                // }

                                function myFunction() {
                                    alert("Cart Added");
                                }
                            </script>
                        </form>
                        <form action="/order_book" method="POST">
                            <input type="text" name="bookid1" value={{ book[0] }} style="display:none">
                            <input type="text" name="isbnnum" value={{ book[1] }} style="display:none">
                            <input type="text" name="total" value={{ book[8] }} style="display:none">
                            <a class="nav-link">
                                <input type="submit" class="btn btn-primary" value="ORDER"> </a>
                        </form>
                    </div>
                </div>
            </div>
            <br> {% endfor %}

        </div>
</body>

</html>